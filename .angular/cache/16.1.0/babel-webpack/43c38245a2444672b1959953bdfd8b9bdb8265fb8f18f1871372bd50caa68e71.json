{"ast":null,"code":"import _asyncToGenerator from \"/Users/cristianleonardovaldeschamorro/Dev/Projects/web-basic-scrobbler/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { SingleTrack } from '../single-track';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nconst scrobblerEndpoint = 'https://5ryd0tcand.execute-api.us-east-1.amazonaws.com/production/post-lastfm-scrobbles';\nexport let SingleTrackFormComponent = /*#__PURE__*/(() => {\n  class SingleTrackFormComponent {\n    constructor() {\n      this.model = new SingleTrack(\"\", \"\", \"\", 420);\n      this.scrobbleResponse = {\n        \"accepted\": \"0\",\n        \"ignored\": \"0\",\n        \"status\": \"\",\n        \"message\": \"\"\n      };\n      this.submitted = false;\n    }\n    onSubmit() {\n      this.submitted = true;\n    }\n    scrobbleTrack() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        console.log(\"Scrobbling request received\");\n        var scrobble = {\n          \"scrobbles\": {\n            \"artist\": _this.model.artist,\n            \"album\": _this.model.album,\n            \"tracks\": [{\n              \"title\": _this.model.title,\n              \"duration\": _this.model.duration\n            }]\n          }\n        };\n        _this.scrobbleResponse = yield _this.postScrobble(scrobble);\n        _this.submitted = true;\n      })();\n    }\n    showFormControls(form) {\n      return form && form.controls.name && form.controls.name.value; // Dr. IQ\n    }\n\n    postScrobble(data) {\n      return _asyncToGenerator(function* () {\n        console.log(data);\n        var response = yield fetch(scrobblerEndpoint, {\n          method: 'POST',\n          cache: 'no-cache',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          referrerPolicy: 'no-referrer',\n          body: JSON.stringify(data) // body data type must match \"Content-Type\" header\n        });\n\n        var jsonData = yield response.json();\n        return jsonData;\n      })();\n    }\n  }\n  SingleTrackFormComponent.ɵfac = function SingleTrackFormComponent_Factory(t) {\n    return new (t || SingleTrackFormComponent)();\n  };\n  SingleTrackFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SingleTrackFormComponent,\n    selectors: [[\"app-single-track-form\"]],\n    decls: 55,\n    vars: 13,\n    consts: [[1, \"container\"], [3, \"hidden\"], [3, \"ngSubmit\"], [\"singleTrackForm\", \"ngForm\"], [1, \"form-group\"], [\"for\", \"artist\"], [\"type\", \"text\", \"id\", \"artist\", \"required\", \"\", \"name\", \"artist\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"artist\", \"ngModel\"], [1, \"alert\", \"alert-danger\", 3, \"hidden\"], [\"for\", \"album\"], [\"type\", \"text\", \"id\", \"album\", \"required\", \"\", \"name\", \"album\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"album\", \"ngModel\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"required\", \"\", \"name\", \"title\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"title\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [1, \"row\"], [1, \"col-xs-3\"], [1, \"col-xs-9\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n    template: function SingleTrackFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n        i0.ɵɵtext(3, \"Submit a Single Track\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function SingleTrackFormComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"label\", 5);\n        i0.ɵɵtext(8, \"Artist\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"input\", 6, 7);\n        i0.ɵɵlistener(\"ngModelChange\", function SingleTrackFormComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.model.artist = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵtext(12, \" Artist is required \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\", 9);\n        i0.ɵɵtext(15, \"Album\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"input\", 10, 11);\n        i0.ɵɵlistener(\"ngModelChange\", function SingleTrackFormComponent_Template_input_ngModelChange_16_listener($event) {\n          return ctx.model.album = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 8);\n        i0.ɵɵtext(19, \" Album is required \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 4)(21, \"label\", 12);\n        i0.ɵɵtext(22, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"input\", 13, 14);\n        i0.ɵɵlistener(\"ngModelChange\", function SingleTrackFormComponent_Template_input_ngModelChange_23_listener($event) {\n          return ctx.model.title = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 8);\n        i0.ɵɵtext(26, \" Title is required \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function SingleTrackFormComponent_Template_button_click_27_listener() {\n          return ctx.scrobbleTrack();\n        });\n        i0.ɵɵtext(28, \"Submit\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"div\", 1)(30, \"h2\");\n        i0.ɵɵtext(31, \"Scrobble Response:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 16)(33, \"div\", 17);\n        i0.ɵɵtext(34, \"Accepted\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 18);\n        i0.ɵɵtext(36);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(37, \"div\", 16)(38, \"div\", 17);\n        i0.ɵɵtext(39, \"Ignored\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"div\", 18);\n        i0.ɵɵtext(41);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"div\", 16)(43, \"div\", 17);\n        i0.ɵɵtext(44, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"div\", 18);\n        i0.ɵɵtext(46);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(47, \"div\", 16)(48, \"div\", 17);\n        i0.ɵɵtext(49, \"Message\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"div\", 18);\n        i0.ɵɵtext(51);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(52, \"br\");\n        i0.ɵɵelementStart(53, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function SingleTrackFormComponent_Template_button_click_53_listener() {\n          return ctx.submitted = false;\n        });\n        i0.ɵɵtext(54, \"Edit\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(5);\n        const _r1 = i0.ɵɵreference(10);\n        const _r2 = i0.ɵɵreference(17);\n        const _r3 = i0.ɵɵreference(24);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"hidden\", ctx.submitted);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.artist);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", _r1.valid || _r1.pristine);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.album);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", _r2.valid || _r2.pristine);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.model.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", _r3.valid || _r3.pristine);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.submitted);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.scrobbleResponse.accepted);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.scrobbleResponse.ignored);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.scrobbleResponse.status);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.scrobbleResponse.message);\n      }\n    },\n    dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.NgModel, i1.NgForm]\n  });\n  return SingleTrackFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}